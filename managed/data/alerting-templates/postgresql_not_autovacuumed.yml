---
templates:
  - name: pmm_postgresql_not_autovacuumed
    version: 1
    summary: PostgreSQL tables not auto vacuumed
    expr: |-
      (pg_stat_user_tables_last_autovacuum > 0) and (time() - pg_stat_user_tables_last_autovacuum) > 60 * 60 * 24 * 10
    for: 1h
    severity: warning
    annotations:
      summary: Postgresql table not auto autovacuumed (instance {{ $labels.instance }})
      description: |-
        Table {{ $labels.relname }} has not been auto autovacuumed for 10 days
        VALUE = {{ $value }}
        LABELS = {{ $labels }}
