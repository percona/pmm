# Percona Monitoring and Management 2.43.0

| **Release date** | July , 2024                                                                                     |
| -----------------| ----------------------------------------------------------------------------------------------- |
| **Installation** | [Installing Percona Monitoring and Management](../quickstart/index.md) |

Percona Monitoring and Management (PMM) is an open source database monitoring, management, and observability solution for MySQL, PostgreSQL, and MongoDB.

It enables you to observe the health of your database systems, explore new patterns in their behavior, troubleshoot them and execute database management operations regardless of whether your databases are located on-premises or in the cloud.

## What's new in this release

This release introduces this and that

## Release highlights

### MongoDB dashboard updates: now generally available (GA)

The experimental MongoDB dashboards introduced in our previous release have now reached GA, offering enhanced filtering, more detailed metrics, and improved visualizations of MongoDB states and operations. These updates facilitate quicker diagnostics and provide centralized KPI views for more efficient monitoring.

In addition to these enhancements, weâ€™ve made significant updates to the MongoDB menu structure in PMM, improving navigation and accessibility for monitoring features. Key changes include:

1. **MongoDB Instance Summary dashboard**  - redesigned for comprehensive instance monitoring, featuring new panels and metrics for deeper insights.

2. **MongoDB Replica Set Summary dashboard** - extensively revamped to enhance readability and facilitate easier comparison and monitoring of multi-node setups with:
   - improved **Overview** row showing replica set role (Primary, Secondary, Arbiter) and individual metrics.
   - new **Details** row with panels for top hottest collections and command operations
   - added **Collection Details** row displaying sizes and counts
   - enhanced **Replication** section.
   - individual performance rows for in-depth, node-specific metrics, with roles clearly indicated.
   - improved visualization of replica set roles, including dynamic role display in the State panel and chart titles for easier identification and troubleshooting.
   - enhanced **Node Summary** section now displays information for all nodes in a replica set simultaneously, with reorganized, collapsible rows for CPU usage, CPU saturation, Disk I/O, and Network traffic.

3. **MongoDB Sharded Cluster Summary dashboard** (previously **MongoDB Cluster Summary**) enhanced with:
   - new layout with additional filters and panels for comprehensive cluster health monitoring.
   - better version information display, now including MongoS (router) versions alongside config and shard node versions.
   - improved visibility of all components within the sharded cluster architecture,  with MongoS instances now detected and displayed as part of the cluster.

4. **MongoDB Collections Overview dashboard**: improved to address user feedback:
     - the **instance level** charts now correctly apply database and replica set filters
     - the **Top 5 Hottest Collections** charts now display data specific to the selected database and replica set
     - better separation between global and database-specific metrics for improved clarity

5. **Updated MongoDB menu structure**:  Reorganized the MongoDB section for better navigation and accessibility:
   - the new structure highlights the three updated dashboards above and includes two new experimental dashboards: **Experimental MongoDB Oplog Details** and **Experimental MongoDB Collection Overview**.
   - outdated dashboards have been moved to the **Experimental** folder or removed from the menu.

### Accessing the new dashboards

The updated dashboards are now available in the MongoDB and Dashboards sections within PMM, replacing the previous versions as the default dashboards for MongoDB monitoring.

The old dashboards have been moved to the **Experimental** folder and renamed with **(Old)** appended to their names. These older versions will be removed in future releases.

We encourage you to transition to the new dashboards to take advantage of their improved monitoring capabilities and to share your feedback in the PMM forum.

### New MongoDB collector: CurrentOp

The MongoDB exporter now includes the **CurrentOp** collector, offering visibility into active operations, including the new `mongodb_currentop_query_uptime` metric.

To start the MongoDB exporter with the CurrentOp collector enabled, use the `--enable-all-collectors` flag when adding MongoDB services to your PMM instance:

```sh
pmm-admin add mongodb --enable-all-collectors ...
```

Specifying a limit with `--max-collections` for this collector is not necessary.

!!! note "Operation collection limitation"
    To minimize impact on disk usage, the CurrentOp collector is designed to collect only operations that have been running for longer than 1 minute. This limitation helps focus on potentially problematic long-running operations while keeping data volume manageable.

For more information on MongoDB collectors and metrics, see the [pmm-admin commands documentation](../use/commamds/pmm-admin.md).


## Improvements

- [PMM-13133](https://perconadev.atlassian.net/browse/PMM-13133) - 

- [PMM-13054](https://perconadev.atlassian.net/browse/PMM-13054) - The default number of log lines for each log file returned by `httsp://<pmm-server>/logs.zip` endpoint has been increased from 1,000 to 50,000. 

Additionally, the endpoint now includes a customizable line-count parameter in the download URL, allowing you to specify a custom number of log lines or opt for unlimited log size. For more information, see the [API documentation](https://percona-pmm.readme.io/reference/logs).

- [PMM-13159](https://perconadev.atlassian.net/browse/PMM-13159) - We have removed the experimental MongoDB **Collection Details** dashboard from PMM. You can now find up-to-date collection information on the new Mongo **Cluster Summary** dashboard, which provides a more comprehensive and accurate view of MongoDB collection metrics. 

If you have been using the **Collection Details** dashboard, make sure to now check the new **MongoDB Cluster Summary** dashboard for similar information.


## Maintenance

### QAN update: Upgrade to `pg_query_go` v5 and impact on PostgreSQL 9.x

As part of our ongoing maintenance efforts, we have upgraded the `pg_query_go` package to version 5. This latest version helps parse PostgreSQL queries in QAN, provides improved functionality, and enables subsequent upgrades of important dependencies.

However, with this change, QAN will no longer be able to list PostgreSQL database tables for versions 9.4, 9.5, and 9.6. Since all PostgreSQL 9.x versions have already reached their end-of-life status, we recommend upgrading to a supported version of PostgreSQL.

If you're looking to upgrade, you can easily [install the latest version of Percona Distribution for PostgreSQL](https://docs.percona.com/postgresql/16/installing.html). 

### Fixed issues

- [PMM-13246](https://perconadev.atlassian.net/browse/PMM-13246) - Addressed four security vulnerabilities (CVEs) related to the GNU C Library (Glibc), specifically affecting the Name Service Cache Daemon (nscd):

   - [CVE-2024-33599](https://nvd.nist.gov/vuln/detail/CVE-2024-33599)
   - [CVE-2024-33600](https://nvd.nist.gov/vuln/detail/CVE-2024-33600)
   - [CVE-2024-33601](https://nvd.nist.gov/vuln/detail/CVE-2024-33601)
   - [CVE-2024-33602](https://nvd.nist.gov/vuln/detail/CVE-2024-33602) 
 
 While these vulnerabilities did not directly impact PMM's core functionality, fixing them enhanced the overall security of the PMM Server environment. 

