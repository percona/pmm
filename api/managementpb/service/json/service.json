{
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "schemes": [
    "https",
    "http"
  ],
  "swagger": "2.0",
  "info": {
    "title": "PMM Management Service API",
    "version": "v1beta1"
  },
  "paths": {
    "/v1/management/Service/List": {
      "post": {
        "description": "Returns a filtered list of Services.",
        "tags": [
          "MgmtService"
        ],
        "summary": "List Services",
        "operationId": "ListServices",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "external_group": {
                  "description": "Return only services in this external group.",
                  "type": "string",
                  "x-order": 2
                },
                "node_id": {
                  "description": "Return only Services running on that Node.",
                  "type": "string",
                  "x-order": 0
                },
                "service_type": {
                  "description": "ServiceType describes supported Service types.",
                  "type": "string",
                  "default": "SERVICE_TYPE_INVALID",
                  "enum": [
                    "SERVICE_TYPE_INVALID",
                    "MYSQL_SERVICE",
                    "MONGODB_SERVICE",
                    "POSTGRESQL_SERVICE",
                    "PROXYSQL_SERVICE",
                    "HAPROXY_SERVICE",
                    "EXTERNAL_SERVICE"
                  ],
                  "x-order": 1
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {
                "services": {
                  "description": "List of Services.",
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "address": {
                        "description": "Access address (DNS name or IP).\nAddress (and port) or socket is required.",
                        "type": "string",
                        "x-order": 11
                      },
                      "agents": {
                        "description": "List of agents related to this service.",
                        "type": "array",
                        "items": {
                          "type": "object",
                          "properties": {
                            "agent_id": {
                              "description": "Unique randomly generated instance identifier.",
                              "type": "string",
                              "x-order": 0
                            },
                            "agent_password": {
                              "description": "Agent password.",
                              "type": "string",
                              "x-order": 1
                            },
                            "agent_type": {
                              "description": "Agent type.",
                              "type": "string",
                              "x-order": 2
                            },
                            "aws_access_key": {
                              "description": "AWS Access Key.",
                              "type": "string",
                              "x-order": 3
                            },
                            "aws_secret_key": {
                              "description": "AWS Secret Key.",
                              "type": "string",
                              "x-order": 4
                            },
                            "azure_options": {
                              "description": "Options used when adding an Azure exporter.",
                              "type": "string",
                              "x-order": 5
                            },
                            "created_at": {
                              "description": "Creation timestamp.",
                              "type": "string",
                              "format": "date-time",
                              "x-order": 6
                            },
                            "custom_labels": {
                              "description": "Custom user-assigned labels.",
                              "type": "object",
                              "additionalProperties": {
                                "type": "string"
                              },
                              "x-order": 7
                            },
                            "disabled": {
                              "description": "Desired Agent status: enabled (false) or disabled (true).",
                              "type": "boolean",
                              "x-order": 8
                            },
                            "disabled_collectors": {
                              "description": "List of disabled collector names.",
                              "type": "array",
                              "items": {
                                "type": "string"
                              },
                              "x-order": 9
                            },
                            "is_connected": {
                              "description": "True if Agent is running and connected to pmm-managed.",
                              "type": "boolean",
                              "x-order": 37
                            },
                            "listen_port": {
                              "description": "Listen port for scraping metrics.",
                              "type": "integer",
                              "format": "int64",
                              "x-order": 10
                            },
                            "log_level": {
                              "description": "Log level for exporter.",
                              "type": "string",
                              "x-order": 11
                            },
                            "max_query_length": {
                              "description": "Limit query length in QAN.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 12
                            },
                            "max_query_log_size": {
                              "description": "Limit query log size in QAN.",
                              "type": "string",
                              "format": "int64",
                              "x-order": 13
                            },
                            "metrics_path": {
                              "description": "Path under which metrics are exposed, used to generate URI.",
                              "type": "string",
                              "x-order": 14
                            },
                            "metrics_scheme": {
                              "description": "Scheme to generate URI to exporter metrics endpoints.",
                              "type": "string",
                              "x-order": 15
                            },
                            "mongo_db_options": {
                              "description": "TLS options for connecting to MongoDB.",
                              "type": "string",
                              "x-order": 16
                            },
                            "mysql_options": {
                              "description": "Options for connecting to MySQL.",
                              "type": "string",
                              "x-order": 17
                            },
                            "node_id": {
                              "description": "Node identifier.",
                              "type": "string",
                              "x-order": 18
                            },
                            "password": {
                              "description": "Password for connecting the agent to the database.",
                              "type": "string",
                              "x-order": 19
                            },
                            "pmm_agent_id": {
                              "description": "The pmm-agent identifier which runs this instance.",
                              "type": "string",
                              "x-order": 20
                            },
                            "postgresql_options": {
                              "description": "Options for connecting to PostgreSQL.",
                              "type": "string",
                              "x-order": 21
                            },
                            "process_exec_path": {
                              "description": "Path to exec process.",
                              "type": "string",
                              "x-order": 22
                            },
                            "push_metrics": {
                              "description": "True if exporter uses push metrics mode.",
                              "type": "boolean",
                              "x-order": 23
                            },
                            "query_examples_disabled": {
                              "description": "True if query examples are disabled.",
                              "type": "boolean",
                              "x-order": 24
                            },
                            "rds_basic_metrics_disabled": {
                              "description": "True if RDS basic metrics are disdabled.",
                              "type": "boolean",
                              "x-order": 25
                            },
                            "rds_enhanced_metrics_disabled": {
                              "description": "True if RDS enhanced metrics are disdabled.",
                              "type": "boolean",
                              "x-order": 26
                            },
                            "runs_on_node_id": {
                              "description": "Node identifier where this instance runs.",
                              "type": "string",
                              "x-order": 27
                            },
                            "service_id": {
                              "description": "Service identifier.",
                              "type": "string",
                              "x-order": 28
                            },
                            "status": {
                              "description": "Actual Agent status.",
                              "type": "string",
                              "x-order": 29
                            },
                            "table_count": {
                              "description": "Last known table count.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 30
                            },
                            "table_count_tablestats_group_limit": {
                              "description": "Tablestats group collectors are disabled if there are more than that number of tables.\n0 means tablestats group collectors are always enabled (no limit).\nNegative value means tablestats group collectors are always disabled.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 31
                            },
                            "tls": {
                              "description": "Use TLS for database connections.",
                              "type": "boolean",
                              "x-order": 32
                            },
                            "tls_skip_verify": {
                              "description": "Skip TLS certificate and hostname validation.",
                              "type": "boolean",
                              "x-order": 33
                            },
                            "updated_at": {
                              "description": "Last update timestamp.",
                              "type": "string",
                              "format": "date-time",
                              "x-order": 35
                            },
                            "username": {
                              "description": "HTTP basic auth username for collecting metrics.",
                              "type": "string",
                              "x-order": 34
                            },
                            "version": {
                              "description": "Agent version.",
                              "type": "string",
                              "x-order": 36
                            }
                          }
                        },
                        "x-order": 16
                      },
                      "cluster": {
                        "description": "Cluster name.",
                        "type": "string",
                        "x-order": 7
                      },
                      "created_at": {
                        "description": "Creation timestamp.",
                        "type": "string",
                        "format": "date-time",
                        "x-order": 14
                      },
                      "custom_labels": {
                        "description": "Custom user-assigned labels for Service.",
                        "type": "object",
                        "additionalProperties": {
                          "type": "string"
                        },
                        "x-order": 9
                      },
                      "database_name": {
                        "description": "Database name.",
                        "type": "string",
                        "x-order": 3
                      },
                      "environment": {
                        "description": "Environment name.",
                        "type": "string",
                        "x-order": 6
                      },
                      "external_group": {
                        "description": "External group name.",
                        "type": "string",
                        "x-order": 10
                      },
                      "node_id": {
                        "description": "Node identifier where this instance runs.",
                        "type": "string",
                        "x-order": 4
                      },
                      "node_name": {
                        "description": "Node name where this instance runs.",
                        "type": "string",
                        "x-order": 5
                      },
                      "port": {
                        "description": "Access port.\nPort is required when the address present.",
                        "type": "integer",
                        "format": "int64",
                        "x-order": 12
                      },
                      "replication_set": {
                        "description": "Replication set name.",
                        "type": "string",
                        "x-order": 8
                      },
                      "service_id": {
                        "description": "Unique service identifier.",
                        "type": "string",
                        "x-order": 0
                      },
                      "service_name": {
                        "description": "User-defined name unique across all Services.",
                        "type": "string",
                        "x-order": 2
                      },
                      "service_type": {
                        "description": "Service type.",
                        "type": "string",
                        "x-order": 1
                      },
                      "socket": {
                        "description": "Access unix socket.\nAddress (and port) or socket is required.",
                        "type": "string",
                        "x-order": 13
                      },
                      "updated_at": {
                        "description": "Last update timestamp.",
                        "type": "string",
                        "format": "date-time",
                        "x-order": 15
                      }
                    }
                  },
                  "x-order": 0
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 0
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "@type": {
                        "type": "string",
                        "x-order": 0
                      }
                    },
                    "additionalProperties": false
                  },
                  "x-order": 2
                },
                "message": {
                  "type": "string",
                  "x-order": 1
                }
              }
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "MgmtService"
    }
  ]
}