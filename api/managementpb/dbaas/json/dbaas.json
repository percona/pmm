{
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "schemes": [
    "https",
    "http"
  ],
  "swagger": "2.0",
  "info": {
    "title": "PMM DBaaS API",
    "version": "v1beta1"
  },
  "paths": {
    "/v1/management/DBaaS/Kubernetes/List": {
      "post": {
        "tags": [
          "Kubernetes"
        ],
        "summary": "ListKubernetesClusters returns a list of all registered Kubernetes clusters.",
        "operationId": "ListKubernetesClusters",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {
                "kubernetes_clusters": {
                  "description": "Kubernetes clusters.",
                  "type": "array",
                  "items": {
                    "description": "Cluster contains public info about kubernetes cluster.",
                    "type": "object",
                    "properties": {
                      "kubernetes_cluster_name": {
                        "description": "Kubernetes cluster name.",
                        "type": "string",
                        "x-order": 0
                      }
                    }
                  },
                  "x-order": 0
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 1
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type_url": {
                        "type": "string",
                        "x-order": 0
                      },
                      "value": {
                        "type": "string",
                        "format": "byte",
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 3
                },
                "error": {
                  "type": "string",
                  "x-order": 0
                },
                "message": {
                  "type": "string",
                  "x-order": 2
                }
              }
            }
          }
        }
      }
    },
    "/v1/management/DBaaS/Kubernetes/Register": {
      "post": {
        "tags": [
          "Kubernetes"
        ],
        "summary": "RegisterKubernetesCluster registers an existing Kubernetes cluster in PMM.",
        "operationId": "RegisterKubernetesCluster",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "kube_auth": {
                  "description": "KubeAuth represents Kubernetes / kubectl authentication and authorization information.",
                  "type": "object",
                  "properties": {
                    "kubeconfig": {
                      "description": "Kubeconfig file content.",
                      "type": "string",
                      "x-order": 0
                    }
                  },
                  "x-order": 1
                },
                "kubernetes_cluster_name": {
                  "description": "Kubernetes cluster name.",
                  "type": "string",
                  "x-order": 0
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 1
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type_url": {
                        "type": "string",
                        "x-order": 0
                      },
                      "value": {
                        "type": "string",
                        "format": "byte",
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 3
                },
                "error": {
                  "type": "string",
                  "x-order": 0
                },
                "message": {
                  "type": "string",
                  "x-order": 2
                }
              }
            }
          }
        }
      }
    },
    "/v1/management/DBaaS/Kubernetes/Unregister": {
      "post": {
        "tags": [
          "Kubernetes"
        ],
        "summary": "UnregisterKubernetesCluster removes a registered Kubernetes cluster from PMM.",
        "operationId": "UnregisterKubernetesCluster",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "kubernetes_cluster_name": {
                  "description": "Kubernetes cluster name.",
                  "type": "string",
                  "x-order": 0
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 1
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type_url": {
                        "type": "string",
                        "x-order": 0
                      },
                      "value": {
                        "type": "string",
                        "format": "byte",
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 3
                },
                "error": {
                  "type": "string",
                  "x-order": 0
                },
                "message": {
                  "type": "string",
                  "x-order": 2
                }
              }
            }
          }
        }
      }
    },
    "/v1/management/DBaaS/XtraDBCluster/Create": {
      "post": {
        "tags": [
          "XtraDBCluster"
        ],
        "summary": "CreateXtraDBCluster creates a new XtraDB cluster.",
        "operationId": "CreateXtraDBCluster",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "kubernetes_cluster_name": {
                  "description": "Kubernetes cluster name.",
                  "type": "string",
                  "x-order": 0
                },
                "name": {
                  "type": "string",
                  "title": "XtraDB cluster name.\na DNS-1035 label must consist of lower case alphanumeric characters or '-',\nstart with an alphabetic character, and end with an alphanumeric character\n(e.g. 'my-name',  or 'abc-123', regex used for validation is '[a-z]([-a-z0-9]*[a-z0-9])?')",
                  "x-order": 1
                },
                "params": {
                  "description": "XtraDBClusterParams represents XtraDB cluster parameters that can be updated.",
                  "type": "object",
                  "properties": {
                    "cluster_size": {
                      "description": "Cluster size.",
                      "type": "integer",
                      "format": "int32",
                      "x-order": 0
                    },
                    "proxysql": {
                      "description": "ProxySQL container parameters.",
                      "type": "object",
                      "properties": {
                        "compute_resources": {
                          "description": "ComputeResources represents container computer resources requests or limits.",
                          "type": "object",
                          "properties": {
                            "cpu_m": {
                              "description": "CPUs in milliCPUs; 1000m = 1 vCPU.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 0
                            },
                            "memory_bytes": {
                              "description": "Memory in bytes.",
                              "type": "string",
                              "format": "int64",
                              "x-order": 1
                            }
                          },
                          "x-order": 0
                        }
                      },
                      "x-order": 2
                    },
                    "pxc": {
                      "description": "PXC container parameters.",
                      "type": "object",
                      "properties": {
                        "compute_resources": {
                          "description": "ComputeResources represents container computer resources requests or limits.",
                          "type": "object",
                          "properties": {
                            "cpu_m": {
                              "description": "CPUs in milliCPUs; 1000m = 1 vCPU.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 0
                            },
                            "memory_bytes": {
                              "description": "Memory in bytes.",
                              "type": "string",
                              "format": "int64",
                              "x-order": 1
                            }
                          },
                          "x-order": 0
                        }
                      },
                      "x-order": 1
                    }
                  },
                  "x-order": 2
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 1
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type_url": {
                        "type": "string",
                        "x-order": 0
                      },
                      "value": {
                        "type": "string",
                        "format": "byte",
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 3
                },
                "error": {
                  "type": "string",
                  "x-order": 0
                },
                "message": {
                  "type": "string",
                  "x-order": 2
                }
              }
            }
          }
        }
      }
    },
    "/v1/management/DBaaS/XtraDBCluster/Delete": {
      "post": {
        "tags": [
          "XtraDBCluster"
        ],
        "summary": "DeleteXtraDBCluster deletes XtraDB cluster.",
        "operationId": "DeleteXtraDBCluster",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "kubernetes_cluster_name": {
                  "description": "Kubernetes cluster name.",
                  "type": "string",
                  "x-order": 0
                },
                "name": {
                  "description": "XtraDB cluster name.",
                  "type": "string",
                  "x-order": 1
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 1
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type_url": {
                        "type": "string",
                        "x-order": 0
                      },
                      "value": {
                        "type": "string",
                        "format": "byte",
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 3
                },
                "error": {
                  "type": "string",
                  "x-order": 0
                },
                "message": {
                  "type": "string",
                  "x-order": 2
                }
              }
            }
          }
        }
      }
    },
    "/v1/management/DBaaS/XtraDBCluster/Update": {
      "post": {
        "tags": [
          "XtraDBCluster"
        ],
        "summary": "UpdateXtraDBCluster updates existing XtraDB cluster.",
        "operationId": "UpdateXtraDBCluster",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "kubernetes_cluster_name": {
                  "description": "Kubernetes cluster name.",
                  "type": "string",
                  "x-order": 0
                },
                "name": {
                  "description": "XtraDB cluster name.",
                  "type": "string",
                  "x-order": 1
                },
                "params": {
                  "description": "XtraDBClusterParams represents XtraDB cluster parameters that can be updated.",
                  "type": "object",
                  "properties": {
                    "cluster_size": {
                      "description": "Cluster size.",
                      "type": "integer",
                      "format": "int32",
                      "x-order": 0
                    },
                    "proxysql": {
                      "description": "ProxySQL container parameters.",
                      "type": "object",
                      "properties": {
                        "compute_resources": {
                          "description": "ComputeResources represents container computer resources requests or limits.",
                          "type": "object",
                          "properties": {
                            "cpu_m": {
                              "description": "CPUs in milliCPUs; 1000m = 1 vCPU.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 0
                            },
                            "memory_bytes": {
                              "description": "Memory in bytes.",
                              "type": "string",
                              "format": "int64",
                              "x-order": 1
                            }
                          },
                          "x-order": 0
                        }
                      },
                      "x-order": 2
                    },
                    "pxc": {
                      "description": "PXC container parameters.",
                      "type": "object",
                      "properties": {
                        "compute_resources": {
                          "description": "ComputeResources represents container computer resources requests or limits.",
                          "type": "object",
                          "properties": {
                            "cpu_m": {
                              "description": "CPUs in milliCPUs; 1000m = 1 vCPU.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 0
                            },
                            "memory_bytes": {
                              "description": "Memory in bytes.",
                              "type": "string",
                              "format": "int64",
                              "x-order": 1
                            }
                          },
                          "x-order": 0
                        }
                      },
                      "x-order": 1
                    }
                  },
                  "x-order": 2
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 1
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type_url": {
                        "type": "string",
                        "x-order": 0
                      },
                      "value": {
                        "type": "string",
                        "format": "byte",
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 3
                },
                "error": {
                  "type": "string",
                  "x-order": 0
                },
                "message": {
                  "type": "string",
                  "x-order": 2
                }
              }
            }
          }
        }
      }
    },
    "/v1/management/DBaaS/XtraDBClusters/Get": {
      "post": {
        "tags": [
          "XtraDBCluster"
        ],
        "summary": "GetXtraDBCluster returns a XtraDB cluster by name.",
        "operationId": "GetXtraDBCluster",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "kubernetes_cluster_name": {
                  "description": "Kubernetes cluster name.",
                  "type": "string",
                  "x-order": 0
                },
                "name": {
                  "description": "XtraDB cluster name.",
                  "type": "string",
                  "x-order": 1
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {
                "connection_credentials": {
                  "description": "XtraDBClusterConnectionCredentials is cluster connection credentials.",
                  "type": "object",
                  "properties": {
                    "host": {
                      "description": "ProxySQL host.",
                      "type": "string",
                      "x-order": 2
                    },
                    "password": {
                      "description": "ProxySQL password.",
                      "type": "string",
                      "x-order": 1
                    },
                    "port": {
                      "description": "ProxySQL port.",
                      "type": "integer",
                      "format": "int32",
                      "x-order": 3
                    },
                    "username": {
                      "description": "ProxySQL username.",
                      "type": "string",
                      "x-order": 0
                    }
                  },
                  "x-order": 3
                },
                "operation": {
                  "description": "RunningOperation respresents a long-running operation.",
                  "type": "object",
                  "properties": {
                    "message": {
                      "description": "Text describing the current operation progress step.",
                      "type": "string",
                      "x-order": 1
                    },
                    "progress": {
                      "description": "Progress from 0.0 to 1.0; can decrease compared to the previous value.",
                      "type": "number",
                      "format": "float",
                      "x-order": 0
                    }
                  },
                  "x-order": 1
                },
                "params": {
                  "description": "XtraDBClusterParams represents XtraDB cluster parameters that can be updated.",
                  "type": "object",
                  "properties": {
                    "cluster_size": {
                      "description": "Cluster size.",
                      "type": "integer",
                      "format": "int32",
                      "x-order": 0
                    },
                    "proxysql": {
                      "description": "ProxySQL container parameters.",
                      "type": "object",
                      "properties": {
                        "compute_resources": {
                          "description": "ComputeResources represents container computer resources requests or limits.",
                          "type": "object",
                          "properties": {
                            "cpu_m": {
                              "description": "CPUs in milliCPUs; 1000m = 1 vCPU.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 0
                            },
                            "memory_bytes": {
                              "description": "Memory in bytes.",
                              "type": "string",
                              "format": "int64",
                              "x-order": 1
                            }
                          },
                          "x-order": 0
                        }
                      },
                      "x-order": 2
                    },
                    "pxc": {
                      "description": "PXC container parameters.",
                      "type": "object",
                      "properties": {
                        "compute_resources": {
                          "description": "ComputeResources represents container computer resources requests or limits.",
                          "type": "object",
                          "properties": {
                            "cpu_m": {
                              "description": "CPUs in milliCPUs; 1000m = 1 vCPU.",
                              "type": "integer",
                              "format": "int32",
                              "x-order": 0
                            },
                            "memory_bytes": {
                              "description": "Memory in bytes.",
                              "type": "string",
                              "format": "int64",
                              "x-order": 1
                            }
                          },
                          "x-order": 0
                        }
                      },
                      "x-order": 1
                    }
                  },
                  "x-order": 2
                },
                "state": {
                  "description": "XtraDBClusterState represents XtraDB cluster CR state.\n\n - XTRA_DB_CLUSTER_STATE_INVALID: XTRA_DB_CLUSTER_STATE_INVALID represents unknown state.\n - XTRA_DB_CLUSTER_STATE_CHANGING: XTRA_DB_CLUSTER_STATE_CHANGING represents a cluster being changed (initializing).\n - XTRA_DB_CLUSTER_STATE_READY: XTRA_DB_CLUSTER_STATE_READY represents a cluster without pending changes (ready).\n - XTRA_DB_CLUSTER_STATE_FAILED: XTRA_DB_CLUSTER_STATE_FAILED represents a failed cluster (error).\n - XTRA_DB_CLUSTER_STATE_DELETING: XTRA_DB_CLUSTER_STATE_DELETING represents a cluster being deleting.",
                  "type": "string",
                  "default": "XTRA_DB_CLUSTER_STATE_INVALID",
                  "enum": [
                    "XTRA_DB_CLUSTER_STATE_INVALID",
                    "XTRA_DB_CLUSTER_STATE_CHANGING",
                    "XTRA_DB_CLUSTER_STATE_READY",
                    "XTRA_DB_CLUSTER_STATE_FAILED",
                    "XTRA_DB_CLUSTER_STATE_DELETING"
                  ],
                  "x-order": 0
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 1
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type_url": {
                        "type": "string",
                        "x-order": 0
                      },
                      "value": {
                        "type": "string",
                        "format": "byte",
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 3
                },
                "error": {
                  "type": "string",
                  "x-order": 0
                },
                "message": {
                  "type": "string",
                  "x-order": 2
                }
              }
            }
          }
        }
      }
    },
    "/v1/management/DBaaS/XtraDBClusters/List": {
      "post": {
        "tags": [
          "XtraDBCluster"
        ],
        "summary": "ListXtraDBClusters returns a list of XtraDB clusters.",
        "operationId": "ListXtraDBClusters",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "kubernetes_cluster_name": {
                  "description": "Kubernetes cluster name.",
                  "type": "string",
                  "x-order": 0
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {
                "clusters": {
                  "description": "XtraDB clusters information.",
                  "type": "array",
                  "items": {
                    "description": "Cluster represents XtraDB cluster information.",
                    "type": "object",
                    "properties": {
                      "name": {
                        "description": "Cluster name.",
                        "type": "string",
                        "x-order": 0
                      },
                      "operation": {
                        "description": "RunningOperation respresents a long-running operation.",
                        "type": "object",
                        "properties": {
                          "message": {
                            "description": "Text describing the current operation progress step.",
                            "type": "string",
                            "x-order": 1
                          },
                          "progress": {
                            "description": "Progress from 0.0 to 1.0; can decrease compared to the previous value.",
                            "type": "number",
                            "format": "float",
                            "x-order": 0
                          }
                        },
                        "x-order": 2
                      },
                      "params": {
                        "description": "XtraDBClusterParams represents XtraDB cluster parameters that can be updated.",
                        "type": "object",
                        "properties": {
                          "cluster_size": {
                            "description": "Cluster size.",
                            "type": "integer",
                            "format": "int32",
                            "x-order": 0
                          },
                          "proxysql": {
                            "description": "ProxySQL container parameters.",
                            "type": "object",
                            "properties": {
                              "compute_resources": {
                                "description": "ComputeResources represents container computer resources requests or limits.",
                                "type": "object",
                                "properties": {
                                  "cpu_m": {
                                    "description": "CPUs in milliCPUs; 1000m = 1 vCPU.",
                                    "type": "integer",
                                    "format": "int32",
                                    "x-order": 0
                                  },
                                  "memory_bytes": {
                                    "description": "Memory in bytes.",
                                    "type": "string",
                                    "format": "int64",
                                    "x-order": 1
                                  }
                                },
                                "x-order": 0
                              }
                            },
                            "x-order": 2
                          },
                          "pxc": {
                            "description": "PXC container parameters.",
                            "type": "object",
                            "properties": {
                              "compute_resources": {
                                "description": "ComputeResources represents container computer resources requests or limits.",
                                "type": "object",
                                "properties": {
                                  "cpu_m": {
                                    "description": "CPUs in milliCPUs; 1000m = 1 vCPU.",
                                    "type": "integer",
                                    "format": "int32",
                                    "x-order": 0
                                  },
                                  "memory_bytes": {
                                    "description": "Memory in bytes.",
                                    "type": "string",
                                    "format": "int64",
                                    "x-order": 1
                                  }
                                },
                                "x-order": 0
                              }
                            },
                            "x-order": 1
                          }
                        },
                        "x-order": 3
                      },
                      "state": {
                        "description": "XtraDBClusterState represents XtraDB cluster CR state.\n\n - XTRA_DB_CLUSTER_STATE_INVALID: XTRA_DB_CLUSTER_STATE_INVALID represents unknown state.\n - XTRA_DB_CLUSTER_STATE_CHANGING: XTRA_DB_CLUSTER_STATE_CHANGING represents a cluster being changed (initializing).\n - XTRA_DB_CLUSTER_STATE_READY: XTRA_DB_CLUSTER_STATE_READY represents a cluster without pending changes (ready).\n - XTRA_DB_CLUSTER_STATE_FAILED: XTRA_DB_CLUSTER_STATE_FAILED represents a failed cluster (error).\n - XTRA_DB_CLUSTER_STATE_DELETING: XTRA_DB_CLUSTER_STATE_DELETING represents a cluster being deleting.",
                        "type": "string",
                        "default": "XTRA_DB_CLUSTER_STATE_INVALID",
                        "enum": [
                          "XTRA_DB_CLUSTER_STATE_INVALID",
                          "XTRA_DB_CLUSTER_STATE_CHANGING",
                          "XTRA_DB_CLUSTER_STATE_READY",
                          "XTRA_DB_CLUSTER_STATE_FAILED",
                          "XTRA_DB_CLUSTER_STATE_DELETING"
                        ],
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 0
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "type": "object",
              "properties": {
                "code": {
                  "type": "integer",
                  "format": "int32",
                  "x-order": 1
                },
                "details": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type_url": {
                        "type": "string",
                        "x-order": 0
                      },
                      "value": {
                        "type": "string",
                        "format": "byte",
                        "x-order": 1
                      }
                    }
                  },
                  "x-order": 3
                },
                "error": {
                  "type": "string",
                  "x-order": 0
                },
                "message": {
                  "type": "string",
                  "x-order": 2
                }
              }
            }
          }
        }
      }
    }
  }
}