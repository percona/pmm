{
  "swagger": "2.0",
  "info": {
    "title": "managementpb/dbaas/components.proto",
    "version": "version not set"
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/management/DBaaS/Components/ChangePSMDB": {
      "post": {
        "summary": "ChangePSMDBComponents manages PSMDB related components.",
        "operationId": "ChangePSMDBComponents",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1beta1ChangePSMDBComponentsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1beta1ChangePSMDBComponentsRequest"
            }
          }
        ],
        "tags": [
          "Components"
        ]
      }
    },
    "/v1/management/DBaaS/Components/ChangePXC": {
      "post": {
        "summary": "ChangePXCComponents manages PXC related components.",
        "operationId": "ChangePXCComponents",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1beta1ChangePXCComponentsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1beta1ChangePXCComponentsRequest"
            }
          }
        ],
        "tags": [
          "Components"
        ]
      }
    },
    "/v1/management/DBaaS/Components/CheckForOperatorUpdate": {
      "post": {
        "summary": "CheckForOperatorUpdate checks if a new version of an operator is available.",
        "operationId": "CheckForOperatorUpdate",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1beta1CheckForOperatorUpdateResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1beta1CheckForOperatorUpdateRequest"
            }
          }
        ],
        "tags": [
          "Components"
        ]
      }
    },
    "/v1/management/DBaaS/Components/GetPSMDB": {
      "post": {
        "summary": "GetPSMDBComponents returns list of available components for PSMDB Clusters.",
        "operationId": "GetPSMDBComponents",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1beta1GetPSMDBComponentsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1beta1GetPSMDBComponentsRequest"
            }
          }
        ],
        "tags": [
          "Components"
        ]
      }
    },
    "/v1/management/DBaaS/Components/GetPXC": {
      "post": {
        "summary": "GetPXCComponents returns list of available components for PXC Clusters.",
        "operationId": "GetPXCComponents",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1beta1GetPXCComponentsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1beta1GetPXCComponentsRequest"
            }
          }
        ],
        "tags": [
          "Components"
        ]
      }
    },
    "/v1/management/DBaaS/Components/InstallOperator": {
      "post": {
        "summary": "InstallOperator installs given operator in given version.",
        "operationId": "InstallOperator",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1beta1InstallOperatorResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1beta1InstallOperatorRequest"
            }
          }
        ],
        "tags": [
          "Components"
        ]
      }
    }
  },
  "definitions": {
    "ChangeComponentComponentVersion": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string"
        },
        "disable": {
          "type": "boolean"
        },
        "enable": {
          "type": "boolean"
        }
      },
      "description": "ComponentVersion contains operations which should be done with component version."
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "type_url": {
          "type": "string"
        },
        "value": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "runtimeError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string"
        },
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1beta1ChangeComponent": {
      "type": "object",
      "properties": {
        "default_version": {
          "type": "string"
        },
        "versions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ChangeComponentComponentVersion"
          }
        }
      },
      "description": "ChangeComponent contains fields to manage components."
    },
    "v1beta1ChangePSMDBComponentsRequest": {
      "type": "object",
      "properties": {
        "kubernetes_cluster_name": {
          "type": "string",
          "description": "Kubernetes cluster name."
        },
        "mongod": {
          "$ref": "#/definitions/v1beta1ChangeComponent"
        }
      }
    },
    "v1beta1ChangePSMDBComponentsResponse": {
      "type": "object"
    },
    "v1beta1ChangePXCComponentsRequest": {
      "type": "object",
      "properties": {
        "kubernetes_cluster_name": {
          "type": "string",
          "description": "Kubernetes cluster name."
        },
        "pxc": {
          "$ref": "#/definitions/v1beta1ChangeComponent"
        },
        "proxysql": {
          "$ref": "#/definitions/v1beta1ChangeComponent"
        },
        "haproxy": {
          "$ref": "#/definitions/v1beta1ChangeComponent"
        }
      }
    },
    "v1beta1ChangePXCComponentsResponse": {
      "type": "object"
    },
    "v1beta1CheckForOperatorUpdateRequest": {
      "type": "object"
    },
    "v1beta1CheckForOperatorUpdateResponse": {
      "type": "object",
      "properties": {
        "cluster_to_components": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1ComponentsUpdateInformation"
          },
          "description": "The cluster name is used as a key for this map, value contains components and their inforamtion about update."
        }
      }
    },
    "v1beta1Component": {
      "type": "object",
      "properties": {
        "image_path": {
          "type": "string"
        },
        "image_hash": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "critical": {
          "type": "boolean"
        },
        "default": {
          "type": "boolean"
        },
        "disabled": {
          "type": "boolean"
        }
      },
      "description": "Component contains information about component."
    },
    "v1beta1ComponentUpdateInformation": {
      "type": "object",
      "properties": {
        "available_version": {
          "type": "string"
        }
      },
      "description": "ComponentUpdateInformation contains version we can update to for certain component."
    },
    "v1beta1ComponentsUpdateInformation": {
      "type": "object",
      "properties": {
        "component_to_update_information": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1ComponentUpdateInformation"
          },
          "description": "component_to_update_information stores, under the name of the component, information about the update.\n\"pxc-operator\", \"psmdb-operator\" are names used by backend for our operators."
        }
      },
      "description": "ComponentsUpdateInformation contains info about components and their available latest versions."
    },
    "v1beta1GetPSMDBComponentsRequest": {
      "type": "object",
      "properties": {
        "kubernetes_cluster_name": {
          "type": "string",
          "description": "Kubernetes cluster name."
        },
        "db_version": {
          "type": "string",
          "description": "Version of DB."
        }
      }
    },
    "v1beta1GetPSMDBComponentsResponse": {
      "type": "object",
      "properties": {
        "versions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1beta1OperatorVersion"
          }
        }
      }
    },
    "v1beta1GetPXCComponentsRequest": {
      "type": "object",
      "properties": {
        "kubernetes_cluster_name": {
          "type": "string",
          "description": "Kubernetes cluster name."
        },
        "db_version": {
          "type": "string",
          "description": "Version of DB."
        }
      }
    },
    "v1beta1GetPXCComponentsResponse": {
      "type": "object",
      "properties": {
        "versions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1beta1OperatorVersion"
          }
        }
      }
    },
    "v1beta1InstallOperatorRequest": {
      "type": "object",
      "properties": {
        "kubernetes_cluster_name": {
          "type": "string",
          "description": "Kubernetes cluster name."
        },
        "operator_type": {
          "type": "string",
          "description": "operator_type tells what operator we are interested in updating."
        },
        "version": {
          "type": "string",
          "description": "version tells what version of the operator we should update to."
        }
      }
    },
    "v1beta1InstallOperatorResponse": {
      "type": "object",
      "properties": {
        "status": {
          "$ref": "#/definitions/v1beta1OperatorsStatus",
          "description": "Status tells if installation was successfull."
        }
      }
    },
    "v1beta1Matrix": {
      "type": "object",
      "properties": {
        "mongod": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1Component"
          }
        },
        "pxc": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1Component"
          }
        },
        "pmm": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1Component"
          }
        },
        "proxysql": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1Component"
          }
        },
        "haproxy": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1Component"
          }
        },
        "backup": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1Component"
          }
        },
        "operator": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1Component"
          }
        },
        "log_collector": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/v1beta1Component"
          }
        }
      },
      "description": "Matrix contains all available components."
    },
    "v1beta1OperatorVersion": {
      "type": "object",
      "properties": {
        "product": {
          "type": "string"
        },
        "operator": {
          "type": "string"
        },
        "matrix": {
          "$ref": "#/definitions/v1beta1Matrix"
        }
      },
      "description": "OperatorVersion contains information about operator and components matrix."
    },
    "v1beta1OperatorsStatus": {
      "type": "string",
      "enum": [
        "OPERATORS_STATUS_INVALID",
        "OPERATORS_STATUS_OK",
        "OPERATORS_STATUS_UNSUPPORTED",
        "OPERATORS_STATUS_NOT_INSTALLED"
      ],
      "default": "OPERATORS_STATUS_INVALID",
      "description": "OperatorsStatus defines status of operators installed in Kubernetes cluster.\n\n - OPERATORS_STATUS_INVALID: OPERATORS_STATUS_INVALID represents unknown state.\n - OPERATORS_STATUS_OK: OPERATORS_STATUS_OK represents that operators are installed and have supported API version.\n - OPERATORS_STATUS_UNSUPPORTED: OPERATORS_STATUS_UNSUPPORTED represents that operators are installed, but doesn't have supported API version.\n - OPERATORS_STATUS_NOT_INSTALLED: OPERATORS_STATUS_NOT_INSTALLED represents that operators are not installed."
    }
  }
}
