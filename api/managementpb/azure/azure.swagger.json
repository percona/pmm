{
  "swagger": "2.0",
  "info": {
    "title": "managementpb/azure/azure.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "AzureDatabase"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/management/azure/AzureDatabase/Add": {
      "post": {
        "summary": "AddAzureDatabase adds Azure Database instance.",
        "operationId": "AddAzureDatabase",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1beta1AddAzureDatabaseResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1beta1AddAzureDatabaseRequest"
            }
          }
        ],
        "tags": [
          "AzureDatabase"
        ]
      }
    },
    "/v1/management/azure/AzureDatabase/Discover": {
      "post": {
        "summary": "DiscoverAzureDatabase discovers Azure Database for MySQL, MariaDB and PostgreSQL Server instances.",
        "operationId": "DiscoverAzureDatabase",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1beta1DiscoverAzureDatabaseResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "DiscoverAzureDatabaseRequest discover azure databases request.",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1beta1DiscoverAzureDatabaseRequest"
            }
          }
        ],
        "tags": [
          "AzureDatabase"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1beta1AddAzureDatabaseRequest": {
      "type": "object",
      "properties": {
        "region": {
          "type": "string",
          "description": "Azure database location."
        },
        "az": {
          "type": "string",
          "description": "Azure database availability zone."
        },
        "instance_id": {
          "type": "string",
          "description": "Azure database instance ID."
        },
        "node_model": {
          "type": "string",
          "description": "Represents a purchasable Stock Keeping Unit (SKU) under a product.\nhttps://docs.microsoft.com/en-us/partner-center/develop/product-resources#sku."
        },
        "address": {
          "type": "string",
          "description": "Address used to connect to it."
        },
        "port": {
          "type": "integer",
          "format": "int64",
          "description": "Access port."
        },
        "node_name": {
          "type": "string",
          "description": "Unique across all Nodes user-defined name. Defaults to Azure Database instance ID."
        },
        "service_name": {
          "type": "string",
          "description": "Unique across all Services user-defined name. Defaults to Azure Database instance ID."
        },
        "environment": {
          "type": "string",
          "description": "Environment name."
        },
        "username": {
          "type": "string",
          "description": "Username for scraping metrics."
        },
        "password": {
          "type": "string",
          "description": "Password for scraping metrics."
        },
        "azure_client_id": {
          "type": "string",
          "description": "Azure client ID."
        },
        "azure_client_secret": {
          "type": "string",
          "description": "Azure client secret."
        },
        "azure_tenant_id": {
          "type": "string",
          "description": "Azure tanant ID."
        },
        "azure_subscription_id": {
          "type": "string",
          "description": "Azure subscription ID."
        },
        "azure_resource_group": {
          "type": "string",
          "description": "Azure resource group."
        },
        "azure_database_exporter": {
          "type": "boolean",
          "description": "If true, adds azure_database_exporter."
        },
        "qan": {
          "type": "boolean",
          "description": "If true, adds qan-mysql-perfschema-agent or qan-postgresql-pgstatements-agent."
        },
        "custom_labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Custom user-assigned labels for Node and Service."
        },
        "skip_connection_check": {
          "type": "boolean",
          "description": "Skip connection check."
        },
        "tls": {
          "type": "boolean",
          "description": "Use TLS for database connections."
        },
        "tls_skip_verify": {
          "type": "boolean",
          "description": "Skip TLS certificate and hostname validation."
        },
        "disable_query_examples": {
          "type": "boolean",
          "description": "Disable query examples."
        },
        "tablestats_group_table_limit": {
          "type": "integer",
          "format": "int32",
          "description": "Tablestats group collectors will be disabled if there are more than that number of tables.\nIf zero, server's default value is used.\nUse negative value to disable them."
        },
        "type": {
          "$ref": "#/definitions/v1beta1DiscoverAzureDatabaseType",
          "title": "Azure database resource type (mysql, maria, postgres)"
        }
      }
    },
    "v1beta1AddAzureDatabaseResponse": {
      "type": "object"
    },
    "v1beta1DiscoverAzureDatabaseInstance": {
      "type": "object",
      "properties": {
        "instance_id": {
          "type": "string",
          "description": "Azure database instance ID."
        },
        "region": {
          "type": "string",
          "description": "Azure database location."
        },
        "service_name": {
          "type": "string",
          "description": "Azure database server name."
        },
        "username": {
          "type": "string",
          "description": "Database username."
        },
        "address": {
          "type": "string",
          "description": "Address used to connect to it."
        },
        "azure_resource_group": {
          "type": "string",
          "description": "Azure Resource group."
        },
        "environment": {
          "type": "string",
          "description": "Environment tag."
        },
        "type": {
          "$ref": "#/definitions/v1beta1DiscoverAzureDatabaseType",
          "description": "Database type."
        },
        "az": {
          "type": "string",
          "description": "Azure database availability zone."
        },
        "node_model": {
          "type": "string",
          "description": "Represents a purchasable Stock Keeping Unit (SKU) under a product.\nhttps://docs.microsoft.com/en-us/partner-center/develop/product-resources#sku."
        }
      },
      "description": "DiscoverAzureDatabaseInstance models an unique Azure Database instance for the list of instances returned by Discovery."
    },
    "v1beta1DiscoverAzureDatabaseRequest": {
      "type": "object",
      "properties": {
        "azure_client_id": {
          "type": "string",
          "description": "Azure client ID."
        },
        "azure_client_secret": {
          "type": "string",
          "description": "Azure client secret."
        },
        "azure_tenant_id": {
          "type": "string",
          "description": "Azure tanant ID."
        },
        "azure_subscription_id": {
          "type": "string",
          "description": "Azure subscription ID."
        }
      },
      "description": "DiscoverAzureDatabaseRequest discover azure databases request."
    },
    "v1beta1DiscoverAzureDatabaseResponse": {
      "type": "object",
      "properties": {
        "azure_database_instance": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/v1beta1DiscoverAzureDatabaseInstance"
          }
        }
      },
      "description": "DiscoverAzureDatabaseResponse discover azure databases response."
    },
    "v1beta1DiscoverAzureDatabaseType": {
      "type": "string",
      "enum": [
        "DISCOVER_AZURE_DATABASE_TYPE_INVALID",
        "DISCOVER_AZURE_DATABASE_TYPE_MYSQL",
        "DISCOVER_AZURE_DATABASE_TYPE_POSTGRESQL"
      ],
      "default": "DISCOVER_AZURE_DATABASE_TYPE_INVALID",
      "description": "DiscoverAzureDatabaseType describes supported Azure Database instance engines.\n\n - DISCOVER_AZURE_DATABASE_TYPE_MYSQL: MySQL type: microsoft.dbformysql or MariaDB type: microsoft.dbformariadb\n - DISCOVER_AZURE_DATABASE_TYPE_POSTGRESQL: PostgreSQL type: microsoft.dbformysql"
    }
  }
}
