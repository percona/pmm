---
templates:
  - name: mysql_restarted
    version: 1
    summary: MySQL Restarted
    expr: |-
      mysql_global_status_uptime
      < [[ .threshold ]]
    params:
      - name: threshold
        summary: Seconds from the last restart
        unit: "sec"
        type: float # hack to be able to parse the template, original type was int
        range: [0, 400]
        value: 360
    for: 10s
    severity: warning
    labels:
      foo: bar
    annotations:
      description: |-
        MySQL instance {{ $labels.service_name }} was restarted {{ $value }} seconds ago.
        LABELS: {{ $labels }}
      summary: MySQL was restarted (instance {{ $labels.service_name }})
